<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
    </script>
  <link rel="stylesheet" type="text/css" href="css/style.css" />
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light darken py-0">
    <div class="container-fluid">
      <!-- <a class="navbar-brand" href="#">Navbar</a> -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
        aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-link active" aria-current="page" href="#">即時監控</a>
        </div>
      </div>
    </div>
  </nav>





  <div class="container-fluid mt-3">
    <div class="row gx-3">
      <div class="col-6 col-md-4">
        <!-- 上方--------------------------------------------------------------------------------------------- -->
        <!-- 上1 -->
        <div class="card">
          <div class="card-header title py-1">L/F 副料區</div>
          <div class="card-body pt-0">
            <div class="box1 text-center">
              <div class="text-center subtitle p-0">min</div>
              <input id="" type="float" disabled value="100.0" class="subtitle text-center"
                style="width:40px;height:21px">
            </div>
            <div class="center rainbowBar"></div>
            <div class="box2 text-center">
              <div class="text-center subtitle p-0">max</div>
              <input id="" type="float" disabled value="500.0" class="subtitle text-center "
                style="width:40px;height:21px">
            </div>
            <img src="static/loading.png" id="rtsp_image01" class="imgCenter" alt="..." />
          </div>
        </div>
      </div>
      <div class="col-6 col-md-4 ">
        <!-- 上2 -->
        <div class="card">
          <div class="card-header title py-1">出鋼室地下樓梯</div>
          <div class="card-body pt-0">
            <div class="box1 text-center">
              <div class="text-center subtitle p-0">min</div>
              <input id="" type="float" disabled value="100.0" class="subtitle text-center"
                style="width:40px;height:21px">
            </div>
            <div class="center rainbowBar"></div>
            <div class="box2 text-center">
              <div class="text-center subtitle p-0">max</div>
              <input id="" type="float" disabled value="500.0" class="subtitle text-center "
                style="width:40px;height:21px">
            </div> <img src="static/loading.png" id="rtsp_image02" class="imgCenter" alt="..." />
          </div>
        </div>
      </div>
      <div class="col-6 col-md-4 ">
        <!-- 上3 -->
        <div class="card">
          <div class="card-header title py-1">L/D 2F平台</div>
          <div class="card-body pt-0">
            <div class="box1 text-center">
              <div class="text-center subtitle p-0">min</div>
              <input id="" type="float" disabled value="100.0" class="subtitle text-center"
                style="width:40px;height:21px">
            </div>
            <div class="center rainbowBar"></div>
            <div class="box2 text-center">
              <div class="text-center subtitle p-0">max</div>
              <input id="" type="float" disabled value="500.0" class="subtitle text-center "
                style="width:40px;height:21px">
            </div> <img src="static/loading.png" id="rtsp_image03" class="imgCenter" alt="..." />
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- nested grid -->
  <div class="container-fluid mt-3">
    <div class="row ">
      <div class="col-md-6">
        <!-- 下1---------------------------------------------------------------------------------------------- -->
        <div class="card" style="width:955px;height:335px;">
          <div class="card-header title py-1">
            <div class="row g-3 align-items-center">
              <div class="col-auto">
                <div class="col-form-label subtitle p-0">錄影回放</div>
              </div>
              <div class="col-auto">
                <!-- <input type="date" class="form-control" id="date" name="date"
                  style="width:200px;height:17px;font-size: 12px;"> -->
                    <select class="form-select subtitle py-0 setting_pattern" aria-label="Default select example"
                      name="setting_pattern" style="width:178px">
                      <option selected value="1" class="">20220330_T111815</option>
                      <option value="2">20220330_T111829</option>
                      <option value="3">20220330_T111847</option>
                      <option value="4">20220330_T111904</option>
                      <option value="5">20220330_T111926</option>
                    </select>
              </div>
            </div>
          </div>
          <div class="card-body p-0">
              <div class="row  align-items-center tri subtitle">
                <div class="col-4">
                  &nbsp;&nbsp;&nbsp;L/F 副料區
                </div>
                <div class="col-4">
                  &nbsp;&nbsp;&nbsp;出鋼室地下樓梯
                </div>
                <div class="col-4">
                  &nbsp;&nbsp;&nbsp;L/D 2F平台
                </div>
            </div>
            <div class="gap"></div>
            <div class="gap2"></div>
            <video controls muted preload src="" class="video imgCenter">
            </video>

            <div class="video imgCenter"></div>
          </div>
        </div>
      </div>
      <div class="col-md-2 ">
        <!-- 下2---------------------------------------------------------------------------------------------- -->
        <div class="card" style="width:226px;left:12px">
          <div class="card-header title py-1">
            系統狀態
          </div>
          <form class="form-system_status">
            <div class="card-body py-1 ">

              <div class="row g-3 align-items-center">
                <div class="col-auto">
                  <label class="col-form-label subtitle py-0">相機連線狀態:</label>
                </div>
                <div class="col-auto">
                </div>
              </div>

              <ul class="py-0 m-0">
                <div class="row g-3 align-items-center py-0">
                  <div class="col-auto ">
                    <li><label class="col-form-label subtitle py-0">L/F副料區:</label></li>
                  </div>
                  <div class="col-auto">
                    <input id="number" name="status_LF" type="" disabled value="" class="subtitle text-center status_LF"
                    style="width:56px;margin-left:31px;height:21px;border: 1px solid gainsboro;">
                  </div>
                </div>

                <div class="row g-3 align-items-center">
                  <div class="col-auto">
                    <li><label class="col-form-label subtitle py-0">出鋼室下方樓梯:</label></li>
                  </div>
                  <div class="col-auto">
                    <input id="number" name="status_STAIR" type="" disabled value=""
                      class="subtitle text-center status_STAIR" style="width:56px;margin-left:px;height:21px;border: 1px solid gainsboro;">
                  </div>
                </div>

                <div class="row g-3 align-items-center">
                  <div class="col-auto">
                    <li><label class="col-form-label subtitle py-0">L/D 2F平台:</label></li>
                  </div>
                  <div class="col-auto">
                    <input id="number" name="status_LD" type="" disabled value="" class="subtitle text-center status_LD"
                    style="width:56px;margin-left:24px;height:21px;border: 1px solid gainsboro;">
                  </div>
                </div>
              </ul>

              <div class="row g-3 align-items-center">
                <div class="col-auto">
                  <label class="col-form-label subtitle py-0">錄影狀態:</label>
                </div>
                <div class="col-auto">
                  <input id="number" name="status_recording" type="" disabled value=""
                    class="subtitle text-center status_recording" style="width:56px;margin-left:68px;height:21px;border: 1px solid gainsboro;">
                </div>
              </div>

              <div class="row g-3 align-items-center">
                <div class="col-auto">
                  <label class="col-form-label subtitle py-0">硬碟剩餘容量 (%):</label>
                </div>
                <div class="col-auto">
                  <input id="number" name="status_available_space" type="" disabled value=""
                    class="subtitle text-center judge status_available_space"
                    style="width:56px;margin-left:23px;height:21px;border: 1px solid gainsboro;">
                </div>
              </div>
            </div>
            <button type="submit" hidden>get</button>
          </form>
        </div>



        <div class="row">
          <div class="col-md-12 mt-3">
            <form class="form-temperature_status">
              <!-- 下3---------------------------------------------------------------------------------------- -->
              <div class="card" style="width:226px;height:138px;left:12px">
                <div class="card-header title py-1">
                  熱像儀主機回放
                </div>
                <div class="card-body py-1">
                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle py-0">L/F副料區:</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="temperature_LF" type="" disabled value=""
                        class="subtitle text-center judge temperature_LF"
                        style="width:56px;margin-left:62px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>
                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle py-0">出鋼室下方樓梯:</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="temperature_STAIR" type="" disabled value="55.1"
                        class="subtitle text-center judge temperature_STAIR"
                        style="width:56px;margin-left:31px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>
                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle py-0">L/D 2F平台:</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="temperature_LD" type="" disabled value=""
                        class="subtitle text-center judge temperature_LD"
                        style="width:56px;margin-left:55px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>
                </div>
              </div>
              <button type="submit" hidden>get</button>
            </form>
          </div>
        </div>
      </div>


      <div class="col-md-4">
        <div class="row">
          <div class=" col-md-5">
            <!-- 下4------------------------------------------------------------------------------------------ -->
            <div class="card" style="width:290px;right:64px;height:210px">
              <div class="card-header title py-1">
                量測參數設定
              </div>
              <form class="form-temperature_setting">
                <div class="card-body py-1">

                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle py-0">Reflected Temperature (°C):</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="setting_reflected_temperature" type="number" value="" step="0.01"
                        class="subtitle setting_reflected_temperature"
                        style="width:56px;margin-left:27.5px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>

                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle p-0">Atmospheric Temperature (°C):</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="setting_atmospheric_temperature" type="number" value="" step="0.01"
                        class="subtitle setting_atmospheric_temperature"
                        style="width:56px;margin-left:8px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>

                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle p-0">Object Distance (m):</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="setting_object_distance" type="number" value="" step="0.01"
                        class="subtitle setting_object_distance" style="width:56px;margin-left:67px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>

                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle p-0">Object Emissivity (%):</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="setting_object_emissivity" type="number" value="" step="0.01"
                        class="subtitle setting_object_emissivity" style="width:56px;margin-left:61.5px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>

                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle p-0">Relative Humidity (%):</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="setting_relative_humidity" type="number" value="" step="0.01"
                        class="subtitle setting_relative_humidity"  style="width:56px;margin-left:57.5px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>

                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle p-0">Extenal Optics Temperature (°C):</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="setting_external_optics_temperature" type="number" value="" step="0.01"
                        class="subtitle setting_external_optics_temperature"
                        style="width:56px;margin-left:0px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>

                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle p-0">External Optics Transmission (%):</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" name="setting_external_optics_transmission" type="number" value="" step="0.01"
                        class="subtitle setting_external_optics_transmission"  style="width:56px;height:21px;margin-left:-4px;border: 1px solid gainsboro;">
                    </div>
                  </div>
                </div>
                <button type="submit" hidden>get</button>
              </form>
            </div>
          </div>
          <div class="col-md-7">
            <!-- 下5------------------------------------------------------------------------------------------ -->
            <div class="card" style="width:373px;right:24px;">
              <div class="card-header title py-1">
                顯示狀態設定
              </div>
              <form class="form-display_status">
                <div class="card-body py-1">
                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle py-0 px-1">色譜設定:</label>
                    </div>
                    <div class="col-auto">
                      <select class="form-select subtitle  py-0 setting_pattern" aria-label="Default select example"
                        name="setting_pattern" style="width:178px">
                        <option selected value="1" class="ml-0">彩虹</option>
                        <option value="2">鐵灰</option>
                        <option value="3">灰階</option>
                        <option value="4">影像強化</option>
                      </select>
                    </div>
                    <div class="col-auto">
                      <button type="button"
                        class="btn btn-secondary btn-sm subtitle py-0 setting_once_calibration">執行校正</button>
                    </div>

                  </div>

                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle py-0 px-1">校正設定:</label>
                    </div>
                    <div class="col-auto">
                      <select class="form-select subtitle py-0 setting_calibration" name="setting_calibration"
                        aria-label="Default select example" style="width:178px">
                        <option value="0">自動校正</option>
                        <option value="1">每10分鐘</option>
                        <option value="2">每30分鐘</option>
                        <option value="3">關閉校正</option>
                      </select>
                    </div>
                    <div class="col-auto">
                      <button type="button"
                        class="btn btn-secondary btn-sm subtitle py-0 setting_once_autofocus">自動對焦</button>
                    </div>
                  </div>
                  <div class="row g-3 align-items-center">
                    <div class="col-auto">
                      <label class="col-form-label subtitle py-0 px-1">量測溫度區間(°C):</label>
                    </div>
                    <div class="col-auto">
                      <input id="number" type="number" value="" class="subtitle setting_corlorbar_min"
                        name="setting_corlorbar_min" style="width:56px;height:21px;margin-left:7px;border: 1px solid gainsboro;">
                      -
                      <input id="number" name="setting_corlorbar_max" type="number" value="500.0"
                        class="subtitle setting_corlorbar_max" style="width:56px;height:21px;border: 1px solid gainsboro;">
                    </div>
                  </div>
                </div>
                <button type="submit" hidden>get</button>
              </form>
            </div>


            <div class="row">
              <div class="col-md-12 mt-3">
                <!-- 下6-------------------------------------------------------------------------------------- -->
                <div class="card" style="width:373px;right:24px;">
                  <div class="card-header title py-1">
                    監測設定
                  </div>
                  <form class="form-alarm_temperature">
                    <div class="card-body py-1" style="margin-left: 3px;">
                      <div class="row g-2">
                        <div class="col-auto">
                          <label class="col-form-label subtitle p-0">第一段警報溫度 (°C):</label>
                          <input id="number" type="number" step="0.1" name="setting_first_alarm_temperature" value="250.0"
                            class="subtitle setting_first_alarm_temperature" style="width:56px;height:21px;border: 1px solid gainsboro;">
                        </div>

                        <div class="col-auto">
                          <label class="col-form-label subtitle p-0">&nbsp&nbsp取樣率 (Hz):</label>
                          <input id="number" type="number" step="0.1" name="setting_sampling_rate" value="10"
                            class="subtitle setting_sampling_rate" style="margin-left:23px; width:56px;height:21px;border: 1px solid gainsboro;">
                        </div>
                      </div>


                      <div class="row g-2 align-items-center">
                        <div class="col-auto">
                          <label class="col-form-label subtitle p-0">第二段警報溫度 (°C):</label>
                          <input id="number" type="number" step="0.1" value="350.0"
                            class="subtitle setting_second_alarm_temperature" name="setting_second_alarm_temperature"
                            style="width:56px;height:21px;border: 1px solid gainsboro;">

                        </div>
                        <div class="col-auto">
                          <label class="col-form-label subtitle p-0">&nbsp&nbsp像素閥值 (pixel):</label>
                          <input id="number" type="number" step="0.1" value="10"
                            class="subtitle setting_threshold_pixel" name="setting_threshold_pixel"
                            style="width:56px;height:21px;border: 1px solid gainsboro;">
                        </div>
                      </div>
                    </div>
                    <button type="submit" hidden>get</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class=" col-md-12 demo-content text-black mt-3">
          <!-- 下7-------------------------------------------------------------------------------------------- -->
          <div class="card" style="width:680px;right:64px">
            <div class="card-header title py-1">
              輸出設定
            </div>
            <form class="form-export_temperature">
              <div class="card-body py-1">
                <div class="row g-3 align-items-center">
                  <div class="col-auto">
                    <label class="col-form-label subtitle p-0">Export Maximum Data to:</label>
                  </div>
                  <div class="col-auto">
                    <input id="" type="text" value="C:\Users\user\thermalmonitor\20220325_v1"
                      class="subtitle setting_export_maximum_data" name="setting_export_maximum_data"
                      style="width:447px;margin-left:37px;height:21px;border: 1px solid gainsboro;">
                  </div>
                </div>

                <div class="row g-3 align-items-center">
                  <div class="col-auto">
                    <label class="col-form-label subtitle p-0">Export Image and video to:</label>
                  </div>
                  <div class="col-auto">
                    <input id="" type="text" value="C:\Users\user\thermalmonitor\20220325_v1"
                      class="subtitle setting_export_image_video" name="setting_export_image_video"
                      style="width:447px;margin-left:30px;height:21px;border: 1px solid gainsboro;">
                  </div>
                </div>

                <div class="row g-3 align-items-center">
                  <div class="col-auto">
                    <label class="col-form-label subtitle p-0">Export Cameras Temperature to:</label>
                  </div>
                  <div class="col-auto">
                    <input id="" type="text" value="C:\Users\user\thermalmonitor\20220325_v1"
                      class="subtitle setting_export_camera_temperature" name="setting_export_camera_temperature"
                      style="width:447px;height:21px;border: 1px solid gainsboro;">
                  </div>
                </div>
              </div>
              <button type="submit" hidden>get</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  </div>
  <script type="text/javascript">
    var socket1 = io("http://localhost:6147/");
    var img1 = document.getElementById('rtsp_image01')
    socket1.on('data', (data1) => {
      img1.src = 'data:image/jpeg;base64,' + data1
    })
    socket1.on("disconnect", (reason) => {
      console.log("error")
    });
    // 
    var socket2 = io("http://localhost:6148/");
    var img2 = document.getElementById('rtsp_image02')
    socket2.on('data', (data2) => {
      img2.src = 'data:image/jpeg;base64,' + data2
    })
    // 
    var socket3 = io("http://localhost:6149/");
    var img3 = document.getElementById('rtsp_image03')
    socket3.on('data', (data3) => {
      img3.src = 'data:image/jpeg;base64,' + data3
    })
  </script>
  <script type="text/javascript">
    $(document).ready(function () {
      // 初始化
      getInitial()

      // 常態性刷新
      // ....
      var run = null;
      run = setInterval(function () {
        getInitial()
        console.log("ok")
      }, 1000)
      $("input").focus(function () {
        clearInterval(run);
        console.log("focus")
      });
      $("input").focusout(function () {
        run = setInterval(function () {
          getInitial()
          console.log("ok")
        }, 1000)
        console.log("no focus")
      })
      // 前端數值設定
      // 定義要被偵測的form
      formName = [
        'form.form-temperature_setting',
        'form.form-display_status',
        'form.form-alarm_temperature',
        'form.form-export_temperature'
      ]

      var test = {}
      for (var i = 0; i < formName.length; i++) {
        var array = $(formName[i]).serializeArray();
        array.forEach(function (index) {
          test[index.name] = index.value
        })
      }
      data = JSON.stringify(test)
      // console.log(test);
      $.ajax({
        type: "POST",
        url: "http://localhost:6147/api/changed",
        data: data,
        success: function (response) {
          // console.log(response)
        },
        error: function (thrownError) {
          // console.log(thrownError);
        }
      });
      for (var i = 0; i < formName.length; i++) {
        $(formName[i]).on('submit', function (e) {
          e.preventDefault();
          var formData = $(this).serializeObject()
          data = JSON.stringify(formData)
          $.ajax({
            type: "POST",
            url: "http://localhost:6147/api/changed",
            data: data,
            success: function (response) {
              // console.log(response)
            },
            error: function (thrownError) {
              // console.log(thrownError);
            }
          });

          // $('.datahere').html(JSON.stringify(formData));
        });
      }
      // 以下方法為將form底下各input(需有name)的val解析，並且存入陣列中
      $.fn.serializeObject = function () {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function () {
          if (o[this.name]) {
            if (!o[this.name].push) {
              o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
          } else {
            o[this.name] = this.value || '';
          }
        });
        return o;
      };
      // 以下是GET 
      function getInitial() {
        $.ajax({
          type: "GET",
          url: "http://192.168.0.173:6147/api/data/initial",
          dataType: "json",
          success: function (response) {
            // 系統狀態
            // system_status以及system_status_this_div需要對應，用來判斷連線是否正常，並且正確放入值
            var system_status = [
              response.status_LF, response.status_STAIR, response.status_LD, response.status_recording
            ]
            var system_status_this_div = [
              '.status_LF', '.status_STAIR', '.status_LD', '.status_recording'
            ]
            for (var i = 0; i < system_status.length; i++) {
              if (system_status[i] === 1) {
                $(system_status_this_div[i]).val('連線正常')
                $(system_status_this_div[i]).addClass('judge')
                $(system_status_this_div[i]).removeClass('judge2')
              } else {
                $(system_status_this_div[i]).val('連線異常')
                $(system_status_this_div[i]).addClass('judge2')
                $(system_status_this_div[i]).removeClass('judge')
              }
            }
            $('.status_available_space').val(fix(response.status_available_space, 1))
            // ~~~~ 系統狀態 end ~~~~

            // 熱像儀主機回放
            var
              machine_temperature = [
                response.temperature_LF,
                response.temperature_STAIR,
                response.temperature_LD
              ]
            var
              machine_temperature_this_div = [
                '.temperature_LF',
                '.temperature_STAIR',
                '.temperature_LD'
              ]
            for (var i = 0; i < machine_temperature.length; i++) {
              if (machine_temperature[i] <= 55) {
                $(machine_temperature_this_div[i]).val(fix(machine_temperature[i], 1))
                $(machine_temperature_this_div[i]).addClass('judge')
                $(machine_temperature_this_div[i]).removeClass('judge2')
              } else {
                $(machine_temperature_this_div[i]).val(fix(machine_temperature[i], 1))
                $(machine_temperature_this_div[i]).addClass('judge2')
                $(machine_temperature_this_div[i]).removeClass(
                  'judge')
              }
            }
            // ~~~~ 熱像儀主機回放 end ~~~~

            // 量測參數設定
            $(".setting_reflected_temperature").val(fix(response.setting_reflected_temperature, 1))
            $(".setting_atmospheric_temperature").val(fix(response.setting_atmospheric_temperature, 1))
            $(".setting_object_distance").val(fix(response.setting_object_distance, 1))
            $(".setting_object_emissivity").val(fix(response.setting_object_emissivity, 2))
            $(".setting_relative_humidity").val(fix(response.setting_relative_humidity, 2))
            $(".setting_external_optics_temperature").val(fix(response.setting_external_optics_temperature,
              1))
            $(".setting_external_optics_transmission").val(fix(response.setting_external_optics_transmission,
              1))
            // ~~~~ 量測參數設定 end ~~~~

            // 顯示狀態設定
            $(".setting_pattern").val(response.setting_pattern).change();
            $(".setting_calibration").val(response.setting_calibration).change();
            $(".setting_corlorbar_min").val(fix(response.setting_colorbar_min, 1))
            $(".setting_corlorbar_max").val(fix(response.setting_colorbar_max, 1))
            // 執行校正
            // ................

            // 自動對焦
            //  ....
            // ~~~~ 顯示狀態設定 end ~~~~

            // 監測設定
            $(".setting_first_alarm_temperature").val(fix(response.setting_first_alarm_temperature, 1))
            $(".setting_second_alarm_temperature").val(fix(response.setting_second_alarm_temperature, 1))
            $(".setting_sampling_rate").val(response.setting_sampling_rate)
            $(".setting_threshold_pixel").val(response.setting_threshold_pixel)
            // ~~~~ 監測設定 end ~~~~

            // 輸出設定
            $(".setting_export_maximum_data").val(response.setting_export_maximum_data)
            $(".setting_export_image_video").val(response.setting_export_image_video)
            $(".setting_export_camera_temperature").val(response.setting_export_camera_temperature)
            // ~~~~ 輸出設定 end ~~~~

          },
          error: function (thrownError) {
            console.log(thrownError);
          }
        });

      }
      // 小數點轉換
      function fix(num, N) {
        var base = Math.pow(10, N);
        // base = N * 10;
        return Math.floor(num * base) / base
      }
    })
  </script>
</body>

</html>